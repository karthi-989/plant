{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SignIn(){const[loginType,setLoginType]=useState(\"email\");// Default is email\nconst[username,setUsername]=useState(\"\");// For email or phone (depending on loginType)\nconst[phoneNumber,setPhoneNumber]=useState(\"\");// Specifically for phone number\nconst[password,setPassword]=useState(\"\");const[errorMessage,setErrorMessage]=useState(\"\");const navigate=useNavigate();// Handle username (email or phone) change\nconst handleUsernameChange=e=>{if(loginType===\"email\"){setUsername(e.target.value);// If loginType is email, update username state\n}else{setPhoneNumber(e.target.value);// If loginType is phone, update phoneNumber state\n}};// Handle password change\nconst handlePasswordChange=e=>setPassword(e.target.value);const handleSubmit=async e=>{e.preventDefault();// Payload will be based on login type (email or phone number)\nconst payload=loginType===\"email\"?{username,password}:{phoneNumber,password};try{const response=await fetch(\"http://localhost:7000/api/auth/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(payload)});const data=await response.json();if(response.ok){console.log(\"Login successful:\",data);sessionStorage.clear();sessionStorage.setItem(\"role\",data.role);// Role fetched from DB\nnavigate(\"/home\",{state:{username}});// Pass username to the dashboard\n}else{setErrorMessage(data.message||\"Invalid credentials\");}}catch(error){setErrorMessage(\"An error occurred. Please try again.\");console.error(\"Error during login:\",error);}};return/*#__PURE__*/_jsx(\"div\",{className:\"relative min-h-screen bg-gradient-to-r from-blue-50 via-indigo-100 to-purple-250 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full max-w-7xl gap-x-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hidden lg:block w-1/2\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://frontends.udemycdn.com/components/auth/desktop-illustration-step-2-x2.webp\",alt:\"Sign In Illustration\",className:\"w-full h-full object-cover\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-center w-full lg:w-1/2 px-6 py-12 lg:px-16\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sm:mx-auto sm:w-full sm:max-w-md mb-8 text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-indigo-600\",children:\"Knowledge Sharing Platform\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Connect, collaborate, and share knowledge with peers and experts. Join our platform to access valuable insights, contribute to discussions, and grow your professional network.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sm:mx-auto sm:w-full sm:max-w-sm\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"mt-10 text-center text-2xl font-bold tracking-tight text-gray-900\",children:\"Sign in to your account\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-10 sm:mx-auto sm:w-full sm:max-w-sm\",children:[errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 text-center text-sm text-red-500\",children:errorMessage}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:\"block text-sm font-medium text-gray-900\",children:loginType===\"email\"?\"Email\":\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{id:\"username\",name:\"username\",value:loginType===\"email\"?username:phoneNumber,className:\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600\",onChange:handleUsernameChange,placeholder:loginType===\"email\"?\"Enter your email\":\"Enter your phone number\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-900\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\",value:password,className:\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600\",onChange:handlePasswordChange}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-right\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>navigate(\"/forgot-password\"),className:\"text-sm font-medium text-green-600 hover:text-green-500\",children:\"Forgot Password?\"})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full rounded-md bg-green-600 py-1.5 text-white\",children:\"Sign in\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-10 text-center text-sm text-gray-500\",children:[\"Not a member?\",\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/\"),className:\"font-semibold text-green-600 hover:text-green-500\",children:\"Sign Up\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-center\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setLoginType(loginType===\"email\"?\"phone\":\"email\"),className:\"text-sm font-semibold text-green-600 hover:text-green-500\",children:[\"Login with \",loginType===\"email\"?\"Phone Number\":\"Email\"]})})]})]})]})});}","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","SignIn","loginType","setLoginType","username","setUsername","phoneNumber","setPhoneNumber","password","setPassword","errorMessage","setErrorMessage","navigate","handleUsernameChange","e","target","value","handlePasswordChange","handleSubmit","preventDefault","payload","response","fetch","method","headers","body","JSON","stringify","data","json","ok","console","log","sessionStorage","clear","setItem","role","state","message","error","className","children","src","alt","onSubmit","htmlFor","id","name","onChange","placeholder","type","onClick"],"sources":["/Users/karthikmutyala/Documents/Tree/PlantkartFrontend/src/components/LoginFrom.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function SignIn() {\n  const [loginType, setLoginType] = useState(\"email\"); // Default is email\n  const [username, setUsername] = useState(\"\"); // For email or phone (depending on loginType)\n  const [phoneNumber, setPhoneNumber] = useState(\"\"); // Specifically for phone number\n  const [password, setPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const navigate = useNavigate();\n\n  // Handle username (email or phone) change\n  const handleUsernameChange = (e) => {\n    if (loginType === \"email\") {\n      setUsername(e.target.value); // If loginType is email, update username state\n    } else {\n      setPhoneNumber(e.target.value); // If loginType is phone, update phoneNumber state\n    }\n  };\n\n  // Handle password change\n  const handlePasswordChange = (e) => setPassword(e.target.value);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    // Payload will be based on login type (email or phone number)\n    const payload =\n      loginType === \"email\"\n        ? { username, password }\n        : { phoneNumber, password };\n\n    try {\n      const response = await fetch(\"http://localhost:7000/api/auth/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        console.log(\"Login successful:\", data);\n        sessionStorage.clear();\n        sessionStorage.setItem(\"role\", data.role); // Role fetched from DB\n        navigate(\"/home\", { state: { username } }); // Pass username to the dashboard\n      } else {\n        setErrorMessage(data.message || \"Invalid credentials\");\n      }\n    } catch (error) {\n      setErrorMessage(\"An error occurred. Please try again.\");\n      console.error(\"Error during login:\", error);\n    }\n  };\n\n  return (\n    <div className=\"relative min-h-screen bg-gradient-to-r from-blue-50 via-indigo-100 to-purple-250 flex items-center justify-center\">\n      <div className=\"flex w-full max-w-7xl gap-x-10\">\n        {/* Left Image Section */}\n        <div className=\"hidden lg:block w-1/2\">\n          <img\n            src=\"https://frontends.udemycdn.com/components/auth/desktop-illustration-step-2-x2.webp\"\n            alt=\"Sign In Illustration\"\n            className=\"w-full h-full object-cover\"\n          />\n        </div>\n\n        {/* Sign-In Form Section */}\n        <div className=\"flex flex-col justify-center w-full lg:w-1/2 px-6 py-12 lg:px-16\">\n          <div className=\"sm:mx-auto sm:w-full sm:max-w-md mb-8 text-center\">\n            <h1 className=\"text-3xl font-bold text-indigo-600\">\n              Knowledge Sharing Platform\n            </h1>\n            <p className=\"mt-4 text-gray-600\">\n              Connect, collaborate, and share knowledge with peers and experts.\n              Join our platform to access valuable insights, contribute to\n              discussions, and grow your professional network.\n            </p>\n          </div>\n\n          <div className=\"sm:mx-auto sm:w-full sm:max-w-sm\">\n            <h2 className=\"mt-10 text-center text-2xl font-bold tracking-tight text-gray-900\">\n              Sign in to your account\n            </h2>\n          </div>\n\n          <div className=\"mt-10 sm:mx-auto sm:w-full sm:max-w-sm\">\n            {errorMessage && (\n              <div className=\"mb-4 text-center text-sm text-red-500\">\n                {errorMessage}\n              </div>\n            )}\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              <div>\n                <label\n                  htmlFor=\"username\"\n                  className=\"block text-sm font-medium text-gray-900\"\n                >\n                  {loginType === \"email\" ? \"Email\" : \"Phone Number\"}\n                </label>\n                <input\n                  id=\"username\"\n                  name=\"username\"\n                  value={loginType === \"email\" ? username : phoneNumber}\n                  className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600\"\n                  onChange={handleUsernameChange}\n                  placeholder={\n                    loginType === \"email\"\n                      ? \"Enter your email\"\n                      : \"Enter your phone number\"\n                  }\n                />\n              </div>\n              <div>\n                <label\n                  htmlFor=\"password\"\n                  className=\"block text-sm font-medium text-gray-900\"\n                >\n                  Password\n                </label>\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type=\"password\"\n                  value={password}\n                  className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600\"\n                  onChange={handlePasswordChange}\n                />\n                <div className=\"mt-2 text-right\">\n                  <button\n                    type=\"button\"\n                    onClick={() => navigate(\"/forgot-password\")}\n                    className=\"text-sm font-medium text-green-600 hover:text-green-500\"\n                  >\n                    Forgot Password?\n                  </button>\n                </div>\n              </div>\n              <button\n                type=\"submit\"\n                className=\"w-full rounded-md bg-green-600 py-1.5 text-white\"\n              >\n                Sign in\n              </button>\n            </form>\n\n            <p className=\"mt-10 text-center text-sm text-gray-500\">\n              Not a member?{\" \"}\n              <button\n                onClick={() => navigate(\"/\")}\n                className=\"font-semibold text-green-600 hover:text-green-500\"\n              >\n                Sign Up\n              </button>\n            </p>\n\n            {/* Toggle Login Type */}\n            <div className=\"mt-4 text-center\">\n              <button\n                onClick={() =>\n                  setLoginType(loginType === \"email\" ? \"phone\" : \"email\")\n                }\n                className=\"text-sm font-semibold text-green-600 hover:text-green-500\"\n              >\n                Login with {loginType === \"email\" ? \"Phone Number\" : \"Email\"}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}